{"version":3,"sources":["plugins/commands/osu-bpme.js"],"names":["OSUBpMe","name","command","type","info","run","params","body","groupId","group_id","userId","user_id","trim","index","parseInt","QQService","sendGroupMessage","bindUserInfo","OSUService","getInstance","getBoundInfo","getBP","sendInfo"],"mappings":"oLAAA;AACA;AACA,gF;;;;;;;;AAQMA,O,WANL,qBAAQ,EACPC,IAAI,EAAE,gBADC,EAEPC,OAAO,EAAE,MAFF,EAGPC,IAAI,EAAE,OAHC,EAIPC,IAAI,EAAE,oEAJC,EAAR,C,gBAAD,MAMMJ,OANN,CAMc;AACNK,EAAAA,GAAN,CAAUC,MAAV,EAAkBC,IAAlB,EAAwB;AACJC,MAAAA,OADI,GACyBD,IADzB,CACdE,QADc,CACcC,MADd,GACyBH,IADzB,CACKI,OADL;AAEtBL,MAAAA,MAAM,GAAG,CAACA,MAAM,IAAI,GAAX,EAAgBM,IAAhB,EAAT;AACA,YAAMC,KAAK,GAAGC,QAAQ,CAACR,MAAD,EAAS,EAAT,CAAtB;AACA,UAAI,CAACO,KAAL,EAAY;AACVE,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAqC,QAAOF,MAAO,0BAAnD;AACA;AACD;AACD,UAAIO,KAAK,GAAG,EAAR,IAAcA,KAAK,GAAG,CAA1B,EAA6B;AAC3BE,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAoC,sBAApC;AACA;AACD;AACD,YAAMS,YAAY,SAASC,oBAAWC,WAAX,GAAyBC,YAAzB,CAAsCZ,OAAtC,EAA+CE,MAA/C,CAA3B;AACA,UAAI,CAACO,YAAL,EAAmB;AACjBF,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAoC,qCAApC;AACA;AACD;AACD,YAAMJ,IAAI,SAASc,oBAAWC,WAAX,GAAyBE,KAAzB,CAA+BJ,YAA/B,EAA6CJ,KAA7C,CAAnB;AACA,UAAI,OAAOT,IAAP,KAAgB,QAApB,EAA8B;AAC5BW,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAoCJ,IAApC;AACA;AACD;AACD,YAAMc,oBAAWC,WAAX,GAAyBG,QAAzB,CAAmC,MAAKT,KAAM,EAA9C,EAAiDT,IAAjD,EAAuDI,OAAvD,CAAN,CAtBsB;AAuBvB,GAxBW,C;;;AA2BCR,O","sourcesContent":["import { Command } from '../../decorators/plugin';\nimport QQService from '../../services/qq-service';\nimport OSUService from '../../services/osu-service';\n\n@Command({\n  name: '查看osu!所绑定账号的bp',\n  command: 'bpme',\n  type: 'group',\n  info: \"查看所绑定账号的bp, '!bpme 第几bp'来调用, 第几bp不传默认为第一bp, 如: '!bpme 2' 或 '!bpme'\"\n})\nclass OSUBpMe {\n  async run(params, body) {\n    const { group_id: groupId, user_id: userId } = body;\n    params = (params || '1').trim();\n    const index = parseInt(params, 10);\n    if (!index) {\n      QQService.sendGroupMessage(groupId, `非法参数'${params}', 使用'!help bpme'查看使用方法'`);\n      return;\n    }\n    if (index > 20 || index < 1) {\n      QQService.sendGroupMessage(groupId, '仅支持bp查询范围#1-#20, 请重试');\n      return;\n    }\n    const bindUserInfo = await OSUService.getInstance().getBoundInfo(groupId, userId);\n    if (!bindUserInfo) {\n      QQService.sendGroupMessage(groupId, '非法参数, 您未绑定osu!账号, 使用\\'!bind\\'进行账号绑定');\n      return;\n    }\n    const info = await OSUService.getInstance().getBP(bindUserInfo, index);\n    if (typeof info === 'string') {\n      QQService.sendGroupMessage(groupId, info);\n      return;\n    }\n    await OSUService.getInstance().sendInfo(`bp#${index}`, info, groupId);\n  }\n}\n\nexport default OSUBpMe;\n"],"file":"osu-bpme.js","sourceRoot":"/Users/zcwsr/my/japari-admin/src"}