{"version":3,"sources":["plugins/commands/osu-recent.js"],"names":["OSURecent","name","command","type","info","run","params","body","groupId","group_id","userId","user_id","trim","index","parseInt","QQService","sendGroupMessage","bindUserInfo","OSUService","getInstance","getBoundInfo","getRecent","sendInfo"],"mappings":"oLAAA;AACA;AACA,gF;;;;;;;;;;AAUMA,S,WARL,qBAAQ,EACPC,IAAI,EAAE,SADC,EAEPC,OAAO,EAAE,QAFF,EAGPC,IAAI,EAAE,OAHC,EAIPC,IAAI,EAAG;;sDAJA,EAAR,C,gBAAD,MAQMJ,SARN,CAQgB,CACRK,GAAN,CAAUC,MAAV,EAAkBC,IAAlB,EAAwB,8CACJC,OADI,GACyBD,IADzB,CACdE,QADc,CACcC,MADd,GACyBH,IADzB,CACKI,OADL;AAEtBL,MAAAA,MAAM,GAAG,CAACA,MAAM,IAAI,GAAX,EAAgBM,IAAhB,EAAT;AACA,YAAMC,KAAK,GAAGC,QAAQ,CAACR,MAAD,EAAS,EAAT,CAAtB;AACA,UAAI,CAACO,KAAL,EAAY;AACVE,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAqC,QAAOF,MAAO,4BAAnD;AACA;AACD;AACD,UAAIO,KAAK,GAAG,EAAR,IAAcA,KAAK,GAAG,CAA1B,EAA6B;AAC3BE,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAoC,0BAApC;AACA;AACD;AACD,YAAMS,YAAY,SAASC,oBAAWC,WAAX,GAAyBC,YAAzB,CAAsCZ,OAAtC,EAA+CE,MAA/C,CAA3B;AACA,UAAI,CAACO,YAAL,EAAmB;AACjBF,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAoC,+BAApC;AACA;AACD;AACD,YAAMJ,IAAI,SAASc,oBAAWC,WAAX,GAAyBE,SAAzB,CAAmCJ,YAAnC,EAAiDJ,KAAjD,CAAnB;AACA,UAAI,OAAOT,IAAP,KAAgB,QAApB,EAA8B;AAC5BW,2BAAUC,gBAAV,CAA2BR,OAA3B,EAAoCJ,IAApC;AACA;AACD;AACD,YAAMc,oBAAWC,WAAX,GAAyBG,QAAzB,CAAmC,UAAST,KAAM,EAAlD,EAAqDT,IAArD,EAA2DI,OAA3D,CAAN,CAtBsB;AAuBvB,GAxBa,C;;;AA2BDR,S","sourcesContent":["import { Command } from '../../decorators/plugin';\nimport QQService from '../../services/qq-service';\nimport OSUService from '../../services/osu-service';\n\n@Command({\n  name: 'osu绑定账号',\n  command: 'recent',\n  type: 'group',\n  info: `绑定osu!账号和mode, 使用'!bind 你的id,mode'来调用\n  mode不写默认为osu!模式\n  模式代码: (0 = osu!, 1 = Taiko, 2 = CtB, 3 = osu!mania)`\n})\nclass OSURecent {\n  async run(params, body) {\n    const { group_id: groupId, user_id: userId } = body;\n    params = (params || '1').trim();\n    const index = parseInt(params, 10);\n    if (!index) {\n      QQService.sendGroupMessage(groupId, `非法参数'${params}', 使用'!help recent'查看使用方法'`);\n      return;\n    }\n    if (index > 20 || index < 1) {\n      QQService.sendGroupMessage(groupId, '仅支持recent查询范围#1-#20, 请重试');\n      return;\n    }\n    const bindUserInfo = await OSUService.getInstance().getBoundInfo(groupId, userId);\n    if (!bindUserInfo) {\n      QQService.sendGroupMessage(groupId, '您未绑定osu!账号, 使用\\'!bind\\'进行账号绑定');\n      return;\n    }\n    const info = await OSUService.getInstance().getRecent(bindUserInfo, index);\n    if (typeof info === 'string') {\n      QQService.sendGroupMessage(groupId, info);\n      return;\n    }\n    await OSUService.getInstance().sendInfo(`recent#${index}`, info, groupId);\n  }\n}\n\nexport default OSURecent;\n"],"file":"osu-recent.js","sourceRoot":"/Users/zcwsr/my/japari-admin/src"}