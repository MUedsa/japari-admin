{"version":3,"sources":["middlewares/bot-error-reporter.js"],"names":["ctx","next","e","logger","error","Config","ADMINS","forEach","admin","index","setTimeout","QQService","sendPrivateMessage","stack"],"mappings":"0IAAA;AACA;AACA,2D;;AAEe,aAAOA,GAAP,EAAYC,IAAZ,EAAqB;AAClC,QAAI;AACF,YAAMA,IAAI,EAAV;AACD,KAFD,CAEE,OAAOC,CAAP,EAAU;AACVC,sBAAOC,KAAP,CAAaF,CAAb;AACAG,sBAAOC,MAAP,CAAcC,OAAd,CAAsB,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACtCC,QAAAA,UAAU,CAAC,MAAM;AACfC,6BAAUC,kBAAV,CAA6BJ,KAA7B,EAAqC,WAAUN,CAAC,CAACW,KAAM,EAAvD;AACD,SAFS,EAEPJ,KAAK,GAAG,IAAI,IAAP,GAAc,CAFZ,CAAV;AAGD,OAJD;AAKD;AACF,G","sourcesContent":["import logger from '../utils/logger';\nimport QQService from '../services/qq-service';\nimport Config from '../config';\n\nexport default async (ctx, next) => {\n  try {\n    await next();\n  } catch (e) {\n    logger.error(e);\n    Config.ADMINS.forEach((admin, index) => {\n      setTimeout(() => {\n        QQService.sendPrivateMessage(admin, `发生错误: \\n${e.stack}`);\n      }, index ? 3 * 1000 : 0);\n    });\n  }\n};\n"],"file":"bot-error-reporter.js","sourceRoot":"/Users/zcwsr/my/japari-admin/src"}